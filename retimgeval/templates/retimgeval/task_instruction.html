{% extends 'base.html' %}

{% block title %}{{ task.name }}{% endblock title %}

{% block content %}

{% if user.is_authenticated %}

    {% if task.alias == "realism-fundus" %}
    <h1>Realism of AI-generated fundus images</h1>
    <h3>Instruction</h3>
    <ul>
        <li>
            You will be shown a set of three fundus images scans labelled as <b>a</b>, <b>b</b>, and <b>c</b>.
        </li>
        <li>
            The images will be shown for <b>20</b>s. The images will be hidden after the completion of the time limit.
        </li>
        <li>
            In each panel, two of these images have been taken from real patients, one has been generated by an AI.
        </li>
        <li>
            Select the label corresponding to the image generated by the AI.
        </li>
    </ul>
    {% endif %}

    {% if task.alias == "realism-fundus-grading-no-support" %}
    <h1>Grading of DR without decision support</h1>
    <h3>Instruction</h3>
    <ul>
        <li>
            You will be shown a <b>single</b> fundus image.
        </li>
        <li>
            Decide whether the patient shows signs of referable Diabetic Retinopathy (DR), i.e. moderate, severe, or proliferative DR.
        </li>
        <li>
            Additionally, rate the confidence of your decision on a scale of 1 (least confident) to 10 (most confident).
        </li>
        <li>
            If you move your mouse over a region in the image, you are shown a zoomed version of that image region.
        </li>
        <li>
            We record the time you take to reach your decision.
        </li>
    </ul>
    {% endif %}

    {% if task.alias == "realism-fundus-grading-with-support" %}
    <h1>Grading of DR with decision support</h1>
    <h3>Instruction</h3>
    <ul>
        <li>
            You will be shown <b>three</b> fundus images for each patient.
        </li>
        <li>
            The image in the center is the fundus image taken from the patient. The image on the left is a healthier version of the original image generated by our AI. The image on the right is a more diseased version of the original image also generated by our AI.
        </li>
        <li>
            Decide whether the patient shows signs of referable Diabetic Retinopathy (DR), i.e. moderate, severe, or proliferative DR.
        </li>
        <li>
            Additionally, rate the confidence of your decision on a scale of 1 (least confident) to 10 (most confident).
        </li>
        <li>
            If you move your mouse over a region in the image, you are shown a zoomed version of that image region.
        </li>
        <li>
            We record the time you take to reach your decision.
        </li>
    </ul>
    {% endif %}

    {% if task.alias == "realism-oct" %}
    <h1>Realism of AI-generated Optical Coherence Tomography (OCT) images</h1>
    <h3>Instructions</h3>
        <ul>
            <li>You will be shown a set of three OCT images labelled as a, b, and c.</li>
            <li>The images will be shown for <b>20</b>s. The images will be hidden after the completion of the time limit.</li>
            <li>In each panel, two of these images have been taken from real patients, one has been generated by an AI.</li>
            <li>Select the label corresponding to the image generated by the AI.</li>
        </ul>
    {% endif %}

    {% if task.alias == "bagnet-grading-no-support" %}
    <h1>Grading of DR without decision support from AI</h1>
    <h3>Instruction </h3>
    <ul>
        <li>
            You will be shown a single fundus image.
        </li>
        <li>
            Based on the image, decide whether the patient has Diabetic Retinopathy (DR) of any severity, including mild DR.
        </li>
        <li>
            Additionally, rate the confidence of your decision on a scale of 1 (least confident) to 5 (most confident).
        </li>
        <li>
            If you move your mouse over a region in the image, you are shown a zoomed version of that image region.  
        </li>
        <li>
            We record the time you take to reach your decision. 
        </li>
    </ul>
    {% endif %}

    {% if task.alias == "bagnet-grading-with-ai-support" %}
    <h1>Grading of DR with decision support from AI</h1>
    <h3>Instruction</h3>
    <ul>
        <li>
            You will be shown a single fundus image along with an AI model’s decision and confidence in percent (from 0% to 100%, with 100% being the highest confidence score).        
        </li>
        <li>
            Based on the image, decide whether the patient has Diabetic Retinopathy (DR) of any severity, including mild DR.        
        </li>
        <li>
            Additionally, rate the confidence of your decision on a scale of 1 (least confident) to 5 (most confident).        
        </li>
        <li>
            If you move your mouse over a region in the image, you are shown a zoomed version of that image region.        
        </li>
        <li>
            We record the time you take to reach your decision.
        </li>
    </ul>
    {% endif %}

    {% if task.alias == "bagnet-grading-with-ai-support-and-bounding-boxes" %}
    <h1>
        Grading of DR with decision support and explanations from AI
    </h1>
    <h3>
        Instruction
    </h3>
    <ul>
        <li>
            You will be shown a single fundus image along with an AI model’s decision and confidence in percent (from 0% to 100%, with 100% being the highest confidence score).
        </li>
        <li>
            Regions in the image for which the AI model believes that they contain signs of DR will be highlighted by blue boxes. Be aware that some boxes may be erroneously placed and may not contain real lesions. Also, not all lesions are flagged.
        </li>
        <li>
            Based on the image, decide whether the patient has Diabetic Retinopathy (DR) of any severity, including mild DR.
        </li>
        <li>
            Additionally, rate the confidence of your decision on a scale of 1 (least confident) to 5 (most confident).
        </li>
        <li>
            If you move your mouse over a region in the image, you are shown a zoomed version of that image region.
        </li>
        <li>
            We record the time you take to reach your decision. 
        </li>
    </ul>
    {% endif %}

    {% if not already_consented %}
        <form method="post">
            <h3>Information about the study</h3>
            <p>
                Your answers will be saved on a secure server in the EU and will be used to assess the quality of image generation of an AI algorithm. If you have additional questions, do not hesitate to ask. No personal information or information about the quality of your answers will be disclosed at any time to anyone, in particularly it will not be shared with your employer. Please check "consent" below if you agree to these terms.
            </p>
            {% csrf_token %}
            {{ form.non_field_errors }}
            {{ form.consented.errors }}
            <label>{{ form.consented.label_tag }} {{ form.consented }} </label>
            <br/>
            <button type="submit" id="start-btn" class="btn btn-primary">Start</button>
        </form>
    {% else %}
        <button id="start-btn" class="btn btn-primary">Start</button>
        
        <script>
            document.getElementById("start-btn").addEventListener("click", function() {
                window.location.href = "{{ task.get_absolute_url }}";
            });
        </script>

    {% endif %}

{% else %}

<p>You are not logged in yet.</p>

{% endif %}

{% endblock content %}
